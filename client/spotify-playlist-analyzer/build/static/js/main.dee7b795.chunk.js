(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{125:function(e,t){e.exports="data:image/gif;base64,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"},147:function(e,t,a){e.exports=a(292)},292:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(38),o=a.n(s),r=(a(152),a(15)),A=a(16),c=a(31),l=a(30),u=a(32),h=a(297),d=a(303),p=a(298),y=a(39),f=a(89),m=a.n(f),E=a(124),g="FETCH_PLAYLISTS_LOADING",v="FETCH_PLAYLISTS_SUCCESS",w="FETCH_PLAYLISTS_FAILURE",b="PLAYLIST_CHOSEN_TRACK_INFO_LOADING",C="FETCH_TRACKS_INFO_SUCCESS",k="FETCH_TRACKS_INFO_FAILURE",I="FETCH_COLLABORATOR_INFO_SUCCESS",j="FETCH_COLLABORATOR_INFO_FAILURE",B="FETCH_COLLABORATOR_AF_AWARDS_SUCCESS",O="FETCH_COLLABORATOR_AF_AWARDS_FAILURE",Q=a(40),R=a.n(Q),D=function(){function e(t){Object(r.a)(this,e),void 0===t?(this.duration=0,this.popularity=0,this.acousticness=0,this.danceability=0,this.energy=0,this.tempo=0,this.positivity=0,this.speechiness=0,this.loudness=0,this.instrumentalness=0):(this.duration=t.duration,this.popularity=t.popularity,this.acousticness=t.acousticness,this.danceability=t.danceability,this.energy=t.energy,this.tempo=t.tempo,this.positivity=t.positivity,this.speechiness=t.speechiness,this.loudness=t.loudness,this.instrumentalness=t.instrumentalness)}return Object(A.a)(e,[{key:"increaseDuration",value:function(e){this.duration+=e}},{key:"increasePopularity",value:function(e){this.popularity+=e}},{key:"increaseAcousticness",value:function(e){this.acousticness+=e}},{key:"increaseDanceability",value:function(e){this.danceability+=e}},{key:"increaseEnergy",value:function(e){this.energy+=e}},{key:"increaseTempo",value:function(e){this.tempo+=e}},{key:"increasePositivity",value:function(e){this.positivity+=e}},{key:"increaseSpeechiness",value:function(e){this.speechiness+=e}},{key:"increaseLoudness",value:function(e){this.loudness+=e}},{key:"increaseInstrumentalness",value:function(e){this.instrumentalness+=e}},{key:"getAverages",value:function(e){return{popularity:this.popularity/e,acousticness:this.acousticness/e,danceability:this.danceability/e,energy:this.energy/e,tempo:this.tempo/e,positivity:this.positivity/e,speechiness:this.speechiness/e,loudness:this.loudness/e,instrumentalness:this.instrumentalness/e,duration:this.duration/e}}}]),e}(),T={duration:{icon:"clock outline",text:"Longest avg song length",id:"",val:0},popularity:{icon:"group",text:"Most popular songs",id:"",val:0},acousticness:{icon:"battery zero",text:"Loves acoustic songs",id:"",val:0},danceability:{icon:"child",text:"Enjoys dancing music",id:"",val:0},energy:{icon:"bolt",text:"High energy songs",id:"",val:0},tempo:{icon:"fire",text:"Fastest tempo songs",id:"",val:0},positivity:{icon:"plus square",text:"Most positive vibes",id:"",val:0},speechiness:{icon:"talk",text:"Enjoys spoken words",id:"",val:0},loudness:{icon:"volume up",text:"Turns it up to 11",id:"",val:0},instrumentalness:{icon:"wrench",text:"Enjoys real instruments",id:"",val:0}},F=3,S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(r.a)(this,e),t.length>F?this.awardList=t.slice(0,F):this.awardList=t}return Object(A.a)(e,[{key:"addAward",value:function(e){return!(this.awardList.length>F||!e.id)&&(this.awardList.push(e),!0)}}]),e}(),G={},U={},Y=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(r.a)(this,e),this.id=t,U[t]=this,this.trackIds=a,this.img=null,this.name=null,this.score=new D,this.awards=new S}return Object(A.a)(e,[{key:"addTrackId",value:function(e){this.trackIds.push(e),G[e]=this.id}},{key:"setImage",value:function(e){this.img=e}},{key:"setName",value:function(e){this.name=e}},{key:"getNumTracks",value:function(){return this.trackIds.length}}]),e}();function L(e){var t=[];for(var a in U)t.push(R()("https://api.spotify.com/v1/users/"+a,{method:"GET",headers:{Authorization:"Bearer "+e}}));return Promise.all(t).then(function(e){var t=[];return e.forEach(function(e){t.push(e.json())}),Promise.all(t).then(function(e){e.forEach(function(e){!function(e){U[e.id].setImage(e.images[0].url),U[e.id].setName(e.display_name)}(e)})})}).then(function(){return U})}function N(e){var t,a=[];for(var n in U)t=U[n].trackIds.join(),a.push(R()("https://api.spotify.com/v1/audio-features/?ids="+t,{method:"GET",headers:{Authorization:"Bearer "+e}}));return Promise.all(a).then(function(e){var t=[];return console.log(U),e.forEach(function(e){t.push(e.json())}),Promise.all(t).then(function(e){e.forEach(function(e){!function(e){var t;e.forEach(function(e){(t=U[G[e.id]]).score.increaseAcousticness(e.acousticness),t.score.increaseDanceability(e.danceability),t.score.increaseEnergy(e.energy),t.score.increaseInstrumentalness(e.instrumentalness),t.score.increaseLoudness(e.loudness),t.score.increaseTempo(e.tempo),t.score.increasePositivity(e.valence),t.score.increaseSpeechiness(e.speechiness)})}(e.audio_features)})})}).then(function(){return function(){var e,t,a;for(var n in U){t=(e=U[n]).getNumTracks(),a=e.score.getAverages(t);var i=void 0,s=void 0;for(var o in a)(i=a[o])>(s=T[o]).val&&(s.id=n,s.val=i)}for(var r in T)U[T[r].id]&&U[T[r].id].awards.addAward(T[r])}(),U})}function Z(){return(Z=Object(E.a)(m.a.mark(function e(t,a,n){var i,s;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=!0,s=[];case 1:if(!i){e.next=7;break}return e.next=4,R()(a,{method:"GET",headers:{Authorization:"Bearer "+t}}).then(function(e){return e.json()}).then(function(e){return s=s.concat(e.items),!!(a=e.next)}).catch(function(e){return n({type:k,payload:e})});case 4:i=e.sent,e.next=1;break;case 7:return e.abrupt("return",s);case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var x=a(300),M=a(299),H=a(302),J=a(125),P=a.n(J),K=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(l.a)(t).call(this,e))).props.fetchPlaylists(a.props.token),a}return Object(u.a)(t,e),Object(A.a)(t,[{key:"handleClick",value:function(e,t){this.props.choosePlaylist(this.props.token,t)}},{key:"extractCollabPlaylists",value:function(e){var t=this;if(e&&e.items){var a=function(){for(var a=[],n=e.items,s=function(e){n[e].collaborative&&a.push(i.a.createElement(x.a.Item,{onClick:function(a){return t.handleClick(a,n[e])},key:e,as:"a",name:n[e].name,id:n[e].id},n[e].name))},o=0;o<n.length;o++)s(o);return{v:a}}();if("object"===typeof a)return a.v}return e}},{key:"render",value:function(){console.log("RENDERING PlaylistPicker");var e=this.extractCollabPlaylists(this.props.playlists),t=this.props.loading&&i.a.createElement(M.a,{src:P.a,centered:!0});return!this.props.playlistChosen&&i.a.createElement(H.a,{centered:!0,columns:3},i.a.createElement(H.a.Column,null,i.a.createElement(x.a,{inverted:!0,fluid:!0,vertical:!0},i.a.createElement(x.a.Item,{header:!0},"Collaborative Playlists"),e),t))}}]),t}(n.Component),W=Object(y.b)(function(e){return{playlists:e.playlists.playlists,loading:e.playlists.loading,error:e.playlists.error,playlistChosen:e.playlistInfo.playlistChosen}},{fetchPlaylists:function(e){return function(t){t({type:g}),R()("https://api.spotify.com/v1/me/playlists",{method:"GET",headers:{Authorization:"Bearer "+e}}).then(function(e){return e.json()}).then(function(e){t({type:v,payload:e})}).catch(function(e){return t({type:w,payload:e})})}},choosePlaylist:function(e,t){return function(a){a({type:b,payload:t}),function(e,t,a){return Z.apply(this,arguments)}(e,t.tracks.href,a).then(function(e){return function(e){var t,a={};return e.forEach(function(e){t=e.added_by.id,a[t]||(a[t]=new Y(t)),a[t].addTrackId(e.track.id),a[t].score.increasePopularity(e.track.popularity),a[t].score.increaseDuration(e.track.duration_ms)}),a}(e)}).then(function(e){return a({type:C,payload:e}),e}).then(function(t){!function(e,t){L(e).then(function(e){t({type:I,payload:e})}).catch(function(e){t({type:j,payload:e})}),N(e).then(function(e){console.log("gotcollabawards: ",e),t({type:B,payload:e})}).catch(function(e){return t({type:O,payload:e})})}(e,a)})}}})(K),q=a(291),V=a(294),_=a(293),X=a(301),z=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){for(var e=this.props.awards,t=[],a=0;a<e.length;a++)t.push(i.a.createElement("p",{key:e[a].icon},i.a.createElement(V.a,{name:e[a].icon,size:"small"}),i.a.createElement("span",null,e[a].text)));return i.a.createElement(_.a,{id:""},i.a.createElement(X.a,{style:{marginBottom:0},basic:!0},i.a.createElement(M.a,{width:"200",height:"200",circular:!0,src:this.props.img,wrapped:!0})),i.a.createElement(_.a.Content,null,i.a.createElement(_.a.Header,null,this.props.name),i.a.createElement(_.a.Meta,null," Added ",this.props.numTracksAdded," tracks "),i.a.createElement(_.a.Description,null,t)))}}]),t}(n.Component),$=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(A.a)(t,[{key:"createCards",value:function(){var e=[];if(!this.props.loading){var t,a,n,s,o=this.props.collaborators,r=this.props.collabInfoLoaded,A=this.props.collabAwardsLoaded;for(var c in o)t=o[c],a=r?t.img:"https://upload.wikimedia.org/wikipedia/commons/9/93/Default_profile_picture_%28male%29_on_Facebook.jpg",n=r?t.name:"Unknown User",s=A?t.awards.awardList:[],e.push(i.a.createElement(z,{key:c,numTracksAdded:t.getNumTracks(),img:a,name:n,awards:s}))}return e}},{key:"render",value:function(){var e=this.createCards(),t=this.props.collaborators;console.log("rEnDeRiNg CollabCardsFrame"),console.log(t);var a=Object.keys(t).length%6;return i.a.createElement(q.a,{itemsPerRow:a>0?a:1},e)}}]),t}(n.Component),ee=Object(y.b)(function(e){return{collaborators:e.playlistInfo.collaborators,loading:e.playlistInfo.loading,error:e.playlistInfo.error,collabInfoLoaded:e.playlistInfo.collabInfoLoaded,collabAwardsLoaded:e.playlistInfo.collabAwardsLoaded}},{})($),te=a(33),ae=a(136),ne=a(26),ie={playlists:[],loading:!1,error:null},se={collaborators:{},loading:!1,error:null,playlistChosen:!1,collabInfoLoaded:!1,collabAwardsLoaded:!1},oe=Object(te.c)({playlists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(ne.a)({},e,{loading:!0,error:null});case v:return Object(ne.a)({},e,{loading:!1,playlists:t.payload});case w:return Object(ne.a)({},e,{loading:!1,error:t.payload,playlists:[]});default:return e}},playlistInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(ne.a)({},e,{playlistChosen:!0,loading:!0,error:null});case C:return Object(ne.a)({},e,{loading:!1,collaborators:t.payload});case k:return Object(ne.a)({},e,{loading:!1,error:t.payload,collaborators:{}});case I:return Object(ne.a)({},e,{collaborators:t.payload,collabInfoLoaded:!0});case B:return Object(ne.a)({},e,{collaborators:t.payload,collabAwardsLoaded:!0});default:return e}}}),re=[ae.a],Ae=Object(te.e)(oe,{},Object(te.d)(te.a.apply(void 0,re))),ce=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return i.a.createElement(y.a,{store:Ae},i.a.createElement(h.a,null,i.a.createElement("br",null),i.a.createElement(d.a,{textAlign:"center",as:"h1"},"Spotify Collaborative Playlist Analyzer"),i.a.createElement(W,{token:this.props.token}),i.a.createElement(ee,{token:this.props.token}),i.a.createElement("br",null),i.a.createElement(p.a,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function le(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}var ue=window.location.hash.substr(1).split("&").reduce(function(e,t){var a=t.split("=");return e[a[0]]=a[1],e},{});if(ue&&ue.access_token)o.a.render(i.a.createElement(ce,{token:ue.access_token}),document.getElementById("root")),le();else{var he="https://accounts.spotify.com/authorize?client_id=9e240701125547c69d71dce42a0c120b&response_type=token&redirect_uri="+window.location.href+"&scope=playlist-read-private playlist-read-collaborative";window.location.replace(encodeURI(he))}le()}},[[147,2,1]]]);
//# sourceMappingURL=main.dee7b795.chunk.js.map